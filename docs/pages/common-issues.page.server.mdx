import { Link } from '@brillout/docpress'

## Npm packages containing invalid code

Vite purposely doesn't transpile server-side code but lets your Node.js server directly execute npm packages (in order to greatly improve dev performance).

But some npm packages contain invalid Node.js code and we need to add them to `vite.config.js > ssr.noExternal`, see <Link href="/invalid-npm#solution" />.

> The most notable issues are invalid [ESM](https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/) and invalid CSS imports, see <Link href="/invalid-npm#errors" />.


## Hydration mismatch

A recurring problem when doing SSR are so-called *hydration mismatches*: a hydration mismatch is when the content rendered to HTML in Node.js isn't the same than the content rendered in the browser.

> See deep dive explanation and solution at <Link href="/hydration-mismatch" />.

Errors thrown by **Vue** (in the browser):
```js
[Vue warn]: Hydration text mismatch:
 - Client: "foo"
 - Server: "bar"
   at <SomeComponent>
   at <App>
```
```
Hydration completed but contains mismatches.
```

Errors thrown by **React** (in the browser):
```
Warning: Text content did not match. Server: "foo" Client: "bar"
```
```
An error occurred during hydration. The server HTML was replaced with client content in <SomeComponent>.
```
```
Text content does not match server-rendered HTML.
```
```
Hydration failed because the initial UI does not match what was rendered on the server.
```
```
There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering.
```
