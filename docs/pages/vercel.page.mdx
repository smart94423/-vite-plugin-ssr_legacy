import { RepoLink } from 'libframe-docs/components/RepoLink'

To deploy a `vite-plugin-ssr` app to Vercel we:
 - Load `dist/server/importBuild.js` in our Vercel serverless function (e.g. <RepoLink path='/examples/vercel/api/render.js' />).
 - Run our build script (`vite build && vite build --ssr`) in `package.json#scripts['vercel-build']` instead of `package.json#scripts.build`.
 - In the Vercel web UI, set the `OUTPUT DIRECTORY` config of your Vercel app to `dist/client` (and make to sure enable `OVERRIDE`).

> Vercel bundles serverless functions behind the scenes;
> `dist/server/importBuild.js` helps bundlers discover the entire dependency tree.

> Vercel discards all files generated by the `package.json#scritps.build` script. That's why we use `package.json#scripts['vercel-build']` instead.
>
> More infos:
> - [Vercel Docs - Custom Build Step for Node.js](https://vercel.com/docs/runtimes#advanced-usage/advanced-node-js-usage/custom-build-step-for-node-js)
> - [Insightful conversation](https://github.com/vercel/vercel/discussions/6393#discussioncomment-1008607)
> - `vercel.json`'s config `includeFiles` [doesn't work for files that are not committed to the Git repository](https://github.com/vercel/vercel/issues/6478).

To increase build caching performance, Vercel recommends using yarn instead of npm.

Example:
 - <RepoLink path='/examples/vercel/' />

