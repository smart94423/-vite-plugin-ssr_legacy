import { RepoLink } from 'libframe-docs/components/RepoLink'

When using the `escapeInjections` template tag, `vite-plugin-ssr` automatically injects assets to the HTML:

```jsx
import ReactDOMServer from 'react-dom/server'
import React from 'react'
import { escapeInjections } from 'vite-plugin-ssr'

export { render }
export { passToClient }

const passToClient = ['pageProps']

function render() {
  const pageHtml = ReactDOMServer.renderToString(<h1>Hello</h1>);
  return escapeInjections`<!DOCTYPE html>
    <html>
      <body>
        <div id="page-view">${escapeInjections.dangerouslySkipEscape(pageHtml)}</div>
      </body>
    </html>`
}
```

The actual HTML, after `vite-plugin-ssr` has injected the required assets:

```html
<!DOCTYPE html>
<html>
  <head>
    <script type="module" src="/@vite/client"></script>
  </head>
  <body>
    <div id="page-view"><h1>Hello</h1></div>
    <script>
      window.__vite_plugin_ssr__pageContext =
        {_pageId:"\u002Fpages\u002Findex\u002Findex",pageProps:void 0}
    </script>
    <script type="module" src="/renderer/_default.page.client.jsx"></script>
  </body>
</html>
```

If we don't use the template tag `escapeInjections`, then we need to call `injectAssets()`.

For example, the following will result in the same HTML than above.

```jsx
import ReactDOMServer from 'react-dom/server'
import React from 'react'
import { escapeInjections, injectAssets } from 'vite-plugin-ssr'

export { render }
export { passToClient }

const passToClient = ['pageProps']

function render(pageContext) {
  const pageHtml = ReactDOMServer.renderToString(<h1>Hello</h1>);
  const htmlString = `<!DOCTYPE html>
    <html>
      <body>
        <div id="page-view">${pageHtml}</div>
      </body>
    </html>`
  return escapeInjections.dangerouslySkipEscape(injectAssets(htmlString, pageContext))
}
```

> We wrap the whole HTML string with `escapeInjections.dangerouslySkipEscape()`
> to let `vite-plugin-ssr` know that we are aware that we are dangerously skipping escaping.
> See [`escapeInjections`](/escapeInjections) for an explanation why this is dangerous.

Example:
- <RepoLink path='/examples/custom-server-render-integration/' />
